#:kivy 2.1.0
#: import Path pathlib.Path

<SaveDialogContent>:
    orientation: "vertical"
    spacing: "20dp"
    padding: "20dp"
    size_hint_y: None
    adaptive_height: True

    FileChooserIconView:
        id: filechooser
        path: ""
        height: "500dp"
        size_hint_y: None
        dirselect: True
        on_selection: 
            text_input.text = self.selection[0] if self.selection and self.selection[0] and not Path(self.selection[0]).is_dir() else ''
            

    MDTextField:
        id: text_input
        multiline: False
        text: root.dialog.content_disposition
        width: self.width
        multiline: False
        font_size: '16sp'
        required: True
        helper_text: "Enter a file name"
        helper_text_mode: "on_error"
        adaptive_height: True

    MDRelativeLayout:
        size_hint: (1, None)
        height: "30dp"
        spacing: "40dp"
        padding: ("20dp", 0)
        adaptive_height: True

        MDRectangleFlatButton:
            text: "Cancel"
            padding: ("20dp", 0)
            pos_hint: {"left":1}
            text_size: self.size
            on_release: root.dialog.dismiss()

        MDRectangleFlatButton:
            text: "Save"
            padding: ("20dp", 0)
            pos_hint: {"right":1}
            text_size: self.size
            on_release: root.dialog.save(text_input.text, filechooser.path)

<SaveDialog>:
    size_hint: (.8, None)
    auto_dismiss: False
    type: "custom"
    radius: (20, 7, 20, 7)

    