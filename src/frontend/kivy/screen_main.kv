#:kivy 2.1.0
# import  kivymd.color_definitions.colors colors

<MailMe>:
    primary_palette: app.theme_cls.primary_palette

<NavigationItem>:
    focus_color: app.theme_cls.primary_dark
    text_color: app.theme_cls.text_color
    text_right_color: app.theme_cls.text_color
    icon_color: app.theme_cls.text_color
    ripple_color: app.theme_cls.primary_color
    selected_color: app.theme_cls.accent_color
    
<MainScreenWithTopPanel>:
    BoxLayout:
        orientation: 'vertical'
        
        MDTopAppBar:
            id: top_bar
            use_overflow: True
            left_action_items: 
                [
                ['menu', lambda x: nav_drawer.set_state("close") if nav_drawer.state == 'open' else nav_drawer.set_state("open")],
                ]
            right_action_items: 
                [
                ["reload", root.reload, *(["Refresh"]*2)], 
                ["logout-variant", root.logout, *(["Sign out"]*2)]
                ]

        MDNavigationLayout:
            id: main_layout
            size_hint: (1, None)
            height: Window.height - top_bar.height

            MDScreenManager:
                id: sm

            MDNavigationDrawer:
                id: nav_drawer
                type: "standard"
                radius: (0, 16, 16, 0)
                close_on_click: True
                enable_swiping: True

                MDNavigationDrawerMenu:
                    id: md_drawer_menu

                    MDBoxLayout:
                        orientation: "vertical"
                        size_hint: (1, None)
                        pos_hint: {'center_x':.5, }
                        adaptive_height: True
                        spacing: dp(20)

                        MDBoxLayout:
                            orientation: 'horizontal'
                            pos_hint: {'center_x':.5}
                            spacing: dp(10)
                            height: dp(100)
                            size_hint: (1, None)

                            FitImage:
                                id: logo
                                #source: app.theme_cls.custom_logo 
                                size: (dp(100), dp(100))
                                size_hint: (None, None)
                                text_size: self.size
                                halign: 'right'
                                valign: 'middle'

                            MDLabel:
                                text: "INTERNATIONAL\nUNIVERSITY\nOF APPLIED SCIENCES"
                                font_size: '20sp'
                                text_size: self.size
                                height: self.texture_size[1]
                                size_hint: (1, None)
                                halign: 'left'
                                valign: 'bottom'
                                theme_text_color: "Custom"
                                text_color: app.theme_cls.opposite_bg_normal

                        MDLabel:
                            text: "MyCampus Mobile"
                            font_size: '20sp'
                            text_color: app.theme_cls.primary_dark
                            theme_text_color: "Custom"
                            height: self.texture_size[1]
                            text_size: self.size
                            size_hint:(1, None)
                            halign: 'center'
                            valign: 'bottom'

                        MailMe:
                            text: f"Contact: [u][ref=dawid.ciepiela@iu-study.org][color={colors[app.theme_cls.primary_palette]['500']}]dawid.ciepiela@iu-study.org[/color][/ref][/u]"
                            font_style: "Caption"
                            size_hint_y: None
                            font_size: '12sp'
                            height: self.texture_size[1]
                            halign: 'center'
                            valign: 'bottom'
                            markup: True

                    MDNavigationDrawerDivider:

                    MDNavigationDrawerLabel:
                        text: "Navigate"